package GpuServer
version v1r1
author  "Alexey Badalov / Daniel Campora"

# structure
branches cmt doc src

# dependencies
use GpuIpc v* GpuManager
use Boost  v* LCG_Interfaces -no_auto_imports
use tbb    v* LCG_Interfaces
use PatPixelSerialization v* Tf

# application constituent
application gpuserver -import=Boost *.cpp Api/*.cpp Handlers/*.cpp Handlers/PixelTracker/*.cpp

private
# remove the application suffix; the default is ".exe"
macro application_suffix ""

# add link options
macro_append Boost_linkopts " $(Boost_linkopts_filesystem) "
macro_append Boost_linkopts " $(Boost_linkopts_program_options) "
macro_append Boost_linkopts " $(Boost_linkopts_system) "
macro_append Boost_linkopts " $(Boost_linkopts_thread) "

# tbb-specific link options
# macro_append tbb_linkopts " -lpixeltbb "
# macro_append tbb_linkopts " -L`pwd`/../src/Handlers/PixelTracker/slc6 "

macro_prepend tbb_linkopts " -Wl,--no-as-needed " \
              target-darwin "" \
              target-winxp  ""
macro_append tbb_linkopts " -Wl,--as-needed " \
             target-darwin "" \
             target-winxp  "" \
             target-icc    ""

# there should be a way of adding ../src/Handlers/PixelTracker/slc6 to
# LD_LIBRARY_PATH, but I don't know what it is

end_private
